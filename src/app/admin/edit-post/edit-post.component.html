<div class="container">
  <div class="row">
    <div class="col-md-12">
      <h3>Edit post</h3>

      <form *ngIf="post">
        <div class="form-group">
          <label>Title</label>
          <input type="text" class="form-control" placeholder="Title" name="title" [(ngModel)]="post.title" (ngModelChange)="onPostChange($event)">
        </div>

        <div class="form-group">
          <label>Subtitle</label>
          <input type="text" class="form-control" placeholder="Subtitle" name="subtitle" [(ngModel)]="post.subtitle" (ngModelChange)="onPostChange($event)">
        </div>

        <div class="form-group">
          <label>Date published</label>
          <input type="date" class="form-control" placeholder="Date published" name="publishedAt" [(ngModel)]="post.publishedAt" (ngModelChange)="onPostChange($event)">
        </div>

        <div class="form-group">
          <label>Text</label>
          <textarea class="form-control" placeholder="Text" rows="15" name="text" [(ngModel)]="post.text" (ngModelChange)="onPostChange($event)"></textarea>
        </div>

        <div class="checkbox">
          <label>
            <input type="checkbox" name="published" [(ngModel)]="post.published" (ngModelChange)="onPostChange($event)"> Publish
          </label>
        </div>

        <!-- save button -->
        <button class="btn btn-default" [class.btn-default]="!isSaved" [class.btn-success]="isSaved" (click)="save()" [disabled]="isSaved">
          <span *ngIf="!isSaved">Save</span>
          <span *ngIf="isSaved">Saved</span>
          <i *ngIf="isSaved" class="fa fa-check" aria-hidden="true"></i>
        </button>

        <!-- show features -->
        <table class="table table-hover" *ngIf="features">
          <caption>Features</caption>
          <thead>
            <tr>
              <th>ID</th>
              <th>Category</th>
              <th>Name</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let feature of features; let i = index">

              <!-- id -->
              <td>{{ feature._id }}</td>

              <!-- category -->
              <td>
                <i class="fa" [class.fa-bed]="feature.properties.category === 'accomodation'" [class.fa-cutlery]="feature.properties.category === 'food'" [class.fa-globe]="feature.properties.category === 'post'" [class.fa-university]="feature.properties.category === 'attraction'"
                 aria-hidden="true"></i>
              </td>

              <td>{{ feature.properties.name }}</td>
              <td><button class="btn btn-link" (click)="deleteFeature(feature._id)">delete</button></td>
            </tr>
          </tbody>
        </table>

        <a [routerLink]="['/admin/posts/' + post._id + '/new-feature']">New Feature</a>

      </form>
    </div>
  </div>
</div>
